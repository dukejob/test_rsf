<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RSF 乳腺癌复发预测系统</title>
    <!-- Google Fonts: Plus Jakarta Sans (更现代的无衬线字体) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Phosphor Icons (比 FontAwesome 更精致的线性图标库) -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <link href="css/style.css" rel="stylesheet">
</head>
<body>
    
    <div class="app-container">
        <!-- 左侧/顶部 品牌区 -->
        <header class="brand-header">
            <div class="logo-badge">
                <i class="ph-fill ph-dna"></i>
            </div>
            <div>
                <h1>RSF Predictor</h1>
                <p>基于随机生存森林的临床辅助决策系统</p>
            </div>
        </header>

        <!-- 主内容卡片 -->
        <main class="main-card">
            <form id="predictionForm">
                <div class="form-grid">
                    <!-- 第一部分：基本指标 -->
                    <div class="form-section">
                        <h3 class="section-title"><i class="ph-duotone ph-user"></i> 患者指标</h3>
                        
                        <div class="input-group">
                            <label for="age">年龄 (Age)</label>
                            <div class="input-wrapper">
                                <input type="number" id="age" name="age" required min="18" max="100" placeholder="0">
                                <span class="unit">岁</span>
                            </div>
                        </div>

                        <div class="input-group">
                            <label for="tsize">肿瘤大小 (Size)</label>
                            <div class="input-wrapper">
                                <input type="number" id="tsize" name="tsize" required min="1" step="0.1" placeholder="0.0">
                                <span class="unit">mm</span>
                            </div>
                        </div>

                        <div class="input-group">
                            <label for="pnodes">淋巴结 (Nodes)</label>
                            <div class="input-wrapper">
                                <input type="number" id="pnodes" name="pnodes" required min="0" placeholder="0">
                                <span class="unit">个</span>
                            </div>
                        </div>
                    </div>

                    <!-- 第二部分：病理指标 -->
                    <div class="form-section">
                        <h3 class="section-title"><i class="ph-duotone ph-flask"></i> 病理数据</h3>
                        
                        <div class="input-group">
                            <label for="progrec">孕激素受体 (PR)</label>
                            <div class="input-wrapper">
                                <input type="number" id="progrec" name="progrec" required min="0" step="0.1" placeholder="0.0">
                                <span class="unit">fmol/l</span>
                            </div>
                        </div>

                        <div class="input-group">
                            <label for="estrec">雌激素受体 (ER)</label>
                            <div class="input-wrapper">
                                <input type="number" id="estrec" name="estrec" required min="0" step="0.1" placeholder="0.0">
                                <span class="unit">fmol/l</span>
                            </div>
                        </div>
                    </div>

                    <!-- 第三部分：治疗与分级 (大卡片选择) -->
                    <div class="form-section full-width">
                        <h3 class="section-title"><i class="ph-duotone ph-clipboard-text"></i> 诊断详情</h3>
                        
                        <div class="control-label">激素治疗 (Hormonal Therapy)</div>
                        <div class="radio-cards-container">
                            <label class="radio-card">
                                <input type="radio" name="horTh" value="0" checked>
                                <div class="card-content">
                                    <i class="ph-duotone ph-prohibit"></i>
                                    <span>否 (No)</span>
                                </div>
                            </label>
                            <label class="radio-card active-style">
                                <input type="radio" name="horTh" value="1">
                                <div class="card-content">
                                    <i class="ph-duotone ph-check-circle"></i>
                                    <span>是 (Yes)</span>
                                </div>
                            </label>
                        </div>

                        <div class="control-label mt-4">肿瘤分级 (Tumor Grade)</div>
                        <div class="radio-cards-container three-cols">
                            <label class="radio-card">
                                <input type="radio" name="tgrade" value="1" checked>
                                <div class="card-content">
                                    <span class="grade-number">I</span>
                                    <span>低度恶性</span>
                                </div>
                            </label>
                            <label class="radio-card">
                                <input type="radio" name="tgrade" value="2">
                                <div class="card-content">
                                    <span class="grade-number">II</span>
                                    <span>中度恶性</span>
                                </div>
                            </label>
                            <label class="radio-card">
                                <input type="radio" name="tgrade" value="3">
                                <div class="card-content">
                                    <span class="grade-number">III</span>
                                    <span>高度恶性</span>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="submit-btn">
                        <span>开始预测分析</span>
                        <i class="ph-bold ph-arrow-right"></i>
                    </button>
                </div>
            </form>
        </main>

        <!-- 结果弹窗 (初始隐藏) -->
        <div id="results" class="results-overlay" style="display: none;">
            <div class="results-modal">
                <button class="close-modal" onclick="$('#results').fadeOut()"><i class="ph-bold ph-x"></i></button>
                
                <div class="results-header">
                    <div class="result-icon-badge">
                        <i class="ph-duotone ph-chart-line-up"></i>
                    </div>
                    <h2>预测分析报告</h2>
                    <p>Analysis Report</p>
                </div>

                <div class="results-body">
                    <div class="metric-card primary">
                        <span class="metric-label">风险分数 (Risk Score)</span>
                        <div class="metric-value" id="riskScore">-</div>
                    </div>
                    
                    <div class="metric-card secondary">
                        <span class="metric-label">风险分层 (Risk Group)</span>
                        <div class="metric-value" id="riskGroup">-</div>
                    </div>
                </div>
                
                <div class="results-footer">
                    <p><i class="ph-fill ph-info"></i> 结果仅供参考，请结合临床医生建议。</p>
                </div>
            </div>
        </div>
    </div>

    <!-- 保持原有 JS 引用 -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="js/rsf-predictor.js"></script>
    <script src="js/main.js"></script>
</body>
</html>